(function(t){function e(e){for(var r,i,o=e[0],c=e[1],l=e[2],d=0,v=[];d<o.length;d++)i=o[d],n[i]&&v.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(v.length)v.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(r=!1)}r&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},n={app:0},s=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var r=a("1356"),n=a.n(r);n.a},"08be":function(t,e,a){"use strict";var r=a("b205"),n=a.n(r);n.a},1356:function(t,e,a){},1489:function(t,e,a){},"1e0f":function(t,e,a){},4342:function(t,e,a){},"514c":function(t,e,a){"use strict";var r=a("1e0f"),n=a.n(r);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"application"},[a("router-view"),t.isLogged?a("Navbar"):t._e()],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-bottom-nav",{attrs:{active:t.bottomNav,color:t.color,value:!0,fixed:"",dark:"",shift:""},on:{"update:active":function(e){t.bottomNav=e}}},[a("router-link",{attrs:{to:"/profile"}},[a("v-btn",{attrs:{dark:""}},[a("span",[t._v("Профиль")]),a("v-icon",[t._v("person")])],1)],1),a("router-link",{attrs:{to:"/"}},[a("v-btn",{attrs:{dark:""}},[a("span",[t._v("Квесты")]),a("v-icon",[t._v("location_on")])],1)],1),a("router-link",{attrs:{to:"/teams"}},[a("v-btn",{attrs:{dark:""}},[a("span",[t._v("Команда")]),a("v-icon",[t._v("people")])],1)],1)],1)},o=[],c=(a("7f7f"),{name:"Navbar",props:{msg:String},data:function(){return{}},computed:{color:function(){switch(this.$route.name){case"profile":return"#353941";case"events":return"#4ab8e1";case"teams":return"#ffab2d";case"Riddle":return"black";default:return"#4ab8e1"}},bottomNav:function(){switch(this.$route.name){case"profile":return 0;case"events":return 1;case"teams":return 2;case"Riddle":return 1;default:return 1}}}}),l=c,u=a("2877"),d=a("6544"),v=a.n(d),f=a("887a"),p=a("8336"),g=a("132d"),m=Object(u["a"])(l,i,o,!1,null,"62609678",null),h=m.exports;v()(m,{VBottomNav:f["a"],VBtn:p["a"],VIcon:g["a"]});var b={name:"App",components:{Navbar:h},data:function(){return{}},computed:{isLogged:function(){return this.$store.state.authentication.status.loggedIn},isLoading:function(){return this.$store.state.quest.isLoading}}},y=b,_=(a("034f"),a("7496")),x=Object(u["a"])(y,n,s,!1,null,null,null),w=x.exports;v()(x,{VApp:_["a"]});a("6762");var k=a("8c4f"),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"login"},[a("v-container",{staticStyle:{height:"100%"},attrs:{dark:""}},[a("v-layout",{staticStyle:{height:"100%"},attrs:{"align-center":"","align-content-center":"","justify-center":"",dark:""}},[a("v-flex",{staticClass:"mx-3 col-xs-12 col-md-6"},[a("h2",{staticStyle:{"font-size":"40px","text-align":"center",color:"white","font-family":"Montserrat"}},[t._v("NetQuest")]),a("transition",{attrs:{appear:""}},[a("v-tabs",{staticStyle:{width:"100%"},attrs:{dark:"",grow:"",centered:"",color:"transparent","slider-color":"orange"}},[a("v-tab",{attrs:{ripple:""}},[t._v("Вход")]),a("v-tab",{attrs:{ripple:""}},[t._v("Я играю впервые")]),a("v-tab-item",[a("v-form",{attrs:{dark:""},on:{submit:function(e){return e.preventDefault(),t.handleAuth(e)}}},[a("v-text-field",{attrs:{dark:"",label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{dark:"",type:"password",label:"Пароль",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-layout",{attrs:{"justify-left":"","align-center":""}},[a("span",{staticStyle:{"font-size":"30px","font-weight":"600",color:"white"}},[t._v("Войти")]),a("v-btn",{staticStyle:{"background-color":"white",color:"black"},attrs:{loading:t.loading,fab:"",type:"submit"}},[a("v-icon",[t._v("send")])],1)],1)],1)],1),a("v-tab-item",[a("v-form",{attrs:{dark:""},on:{submit:function(e){return e.preventDefault(),t.handleReg(e)}}},[a("v-text-field",{attrs:{dark:"",label:"Фамилия и Имя",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("v-text-field",{attrs:{dark:"",label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{dark:"",type:"password",label:"Пароль",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-layout",{attrs:{"align-center":""}},[a("span",{staticStyle:{"font-size":"30px","font-weight":"600",color:"white"}},[t._v("В игру")]),a("v-btn",{staticClass:"mx-2",staticStyle:{"background-color":"white",color:"black"},attrs:{fab:"",loading:t.loading,type:"submit"}},[a("v-icon",{attrs:{loading:t.loading}},[t._v("lock")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},j=[],S=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),C=a("2f62");function V(t,e){var a=Object.keys(t);return Object.getOwnPropertySymbols&&a.push.apply(a,Object.getOwnPropertySymbols(t)),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a}function P(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?V(a,!0).forEach(function(e){Object(S["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):V(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var E={name:"Login",components:{},data:function(){return{name:"",email:"",password:"",date:"",menu:!1}},computed:P({},Object(C["c"])("authentication",{loading:function(t){return t.loading}})),methods:{handleAuth:function(){var t=this.email,e=this.password,a=this.$store.dispatch;t&&e&&a("authentication/login",{email:t,password:e})},handleReg:function(){var t=this.name,e=this.email,a=this.password,r=this.$store.dispatch;e&&a&&t&&r("authentication/register",{name:t,email:e,password:a})}},beforeUpdate:function(){var t=JSON.parse(localStorage.getItem("user"));t&&this.router.push("/")}},T=E,q=(a("514c"),a("a523")),I=a("0e8f"),D=a("4bd4"),$=a("a722"),R=a("71a3"),L=a("c671"),A=a("fe57"),N=a("2677"),B=Object(u["a"])(T,O,j,!1,null,"55ce777d",null),F=B.exports;v()(B,{VBtn:p["a"],VContainer:q["a"],VFlex:I["a"],VForm:D["a"],VIcon:g["a"],VLayout:$["a"],VTab:R["a"],VTabItem:L["a"],VTabs:A["a"],VTextField:N["a"]});var J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{staticClass:"events"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header__name"},[t._v("События")]),a("div",{staticClass:"header__sub"},[t._v("Актуальное")]),a("v-flex",{staticStyle:{"z-index":"999","margin-top":"5px"},attrs:{xs12:""}},[a("router-link",{attrs:{to:"/event/"+t.actualEvent[0]._id}},[t.actualEvent[0]?a("v-card",{staticClass:"blue--text",staticStyle:{"border-radius":"5px"},attrs:{ripple:"",elevation:"24",color:"white darken-2"}},[a("v-layout",[a("v-flex",{attrs:{xs5:""}},[a("v-img",{staticStyle:{"border-radius":"5px"},attrs:{src:t.actualEvent[0].image,height:"100%",cover:""}})],1),a("v-flex",{attrs:{xs7:""}},[a("v-card-title",[a("div",[a("div",{staticClass:"headline"},[t._v(t._s(t.actualEvent[0].title))]),a("div",[t._v(t._s(t.actualEvent[0].dateStart))]),t.loading?a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):t._e()],1)])],1)],1)],1):t._e()],1)],1)],1),t.events?a("v-container",{staticClass:"contents"},[a("v-layout",[a("h2",{staticClass:"content__subheader"},[t._v("Предстоящие игры")])]),t._l(t.events,function(e){return a("v-layout",{key:e.id,staticClass:"mt-2 mb-2",staticStyle:{"z-index":"1"}},[a("v-flex",{attrs:{xs12:""}},[a("router-link",{attrs:{to:"/event/"+e._id}},[a("v-card",{staticClass:"blue--text",staticStyle:{"border-radius":"5px"},attrs:{ripple:"",color:"white darken-2"}},[a("v-layout",[a("v-flex",{attrs:{xs5:""}},[a("v-img",{staticStyle:{"border-radius":"5px"},attrs:{src:e.image,height:"100px",cover:""}})],1),a("v-flex",{attrs:{xs7:""}},[a("v-card-title",[a("div",[a("div",{staticClass:"headline"},[t._v(t._s(e.title))]),a("div",[t._v(t._s(e.dateStart))])])])],1)],1)],1)],1)],1)],1)})],2):t._e()],1)])},Q=[];function M(t,e){var a=Object.keys(t);return Object.getOwnPropertySymbols&&a.push.apply(a,Object.getOwnPropertySymbols(t)),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a}function z(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?M(a,!0).forEach(function(e){Object(S["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):M(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var U={name:"Events",components:{},data:function(){return{}},computed:z({},Object(C["b"])({events:"quest/events",actualEvent:"quest/actualEvent"}),{},Object(C["c"])("quest",{loading:function(t){return t.loading}})),methods:{},beforeCreate:function(){this.$store.dispatch("quest/getEvents")},updated:function(){}},H=U,G=(a("6f07"),a("b0af")),K=a("12b2"),W=a("adda"),X=a("490a"),Y=Object(u["a"])(H,J,Q,!1,null,"68220579",null),Z=Y.exports;v()(Y,{VCard:G["a"],VCardTitle:K["a"],VContainer:q["a"],VFlex:I["a"],VImg:W["a"],VLayout:$["a"],VProgressCircular:X["a"]});var tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"events"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header__name"},[t._v("Команда")]),a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-box__title"},[t._v("Найти команду")]),a("v-text-field",{attrs:{solo:"",label:"Введите название","append-icon":"search"}})],1)]),a("v-container",{staticClass:"content"},[a("v-layout",[a("div",{staticStyle:{"margin-top":"-20px"},attrs:{width:"80%"}},[a("h2",{staticClass:"content__subheader"},[t._v("Ведутся ремонтные работы")]),a("img",{attrs:{src:"https://cdn.dribbble.com/users/758377/screenshots/6193921/ezgif.com-crop__2_.gif",width:"100%"}})])])],1)],1)},et=[],at={name:"Events",components:{},data:function(){return{}},created:function(){}},rt=at,nt=(a("08be"),Object(u["a"])(rt,tt,et,!1,null,"5790c678",null)),st=nt.exports;v()(nt,{VContainer:q["a"],VLayout:$["a"],VTextField:N["a"]});var it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"events"},[a("div",{staticClass:"header"},[a("v-layout",{attrs:{"justify-space-between":"","align-center":""}},[a("div",{staticClass:"header__name"},[t._v("Профиль")]),a("v-layout",{attrs:{"justify-end":""}},[a("v-btn",{attrs:{fab:"",small:"",flat:""}},[a("v-icon",{attrs:{color:"white",text:"edit"}},[t._v("edit")])],1),a("v-btn",{attrs:{fab:"",small:"",flat:""},on:{click:function(e){return t.logout()}}},[a("v-icon",{attrs:{color:"white"}},[t._v("exit_to_app")])],1)],1)],1),a("v-card",{staticStyle:{"border-radius":"5px"},attrs:{ripple:"",elevation:"24",color:"white darken-2"}},[a("v-layout",[a("v-flex",{attrs:{xs5:""}},[a("v-img",{staticStyle:{"border-radius":"5px"},attrs:{src:"http://www.myiconfinder.com/uploads/iconsets/256-256-2ee3cdfef28432d77968ad64885c3d26-detective.png",height:"150px",cover:""}})],1),a("v-flex",{attrs:{xs7:""}},[a("v-card-title",[a("div",[a("div",{staticClass:"headline",staticStyle:{"font-weight":"600"}},[t._v(t._s(t.name))]),a("div",{staticStyle:{opacity:"0.8"}},[t._v(t._s(t.email))]),a("div",{staticStyle:{opacity:"0.8"}},[t._v("Детектив с: "+t._s(t.registeredSince))])])])],1)],1)],1)],1),a("v-container",{staticClass:"content"},[a("v-layout",[a("h2",{staticClass:"content__subheader"},[t._v("Прошедшие игры")])])],1)],1)},ot=[],ct=(a("28a5"),{name:"Events",components:{},data:function(){return{name:"",email:"",registered:""}},computed:{registeredSince:function(){var t=this.registered.split("T")[0].split("-"),e="";switch(t[1]){case"01":e="января";break;case"02":e="февраля";break;case"03":e="марта";break;case"04":e="апреля";break;case"05":e="мая";break;case"06":e="июня";break;case"07":e="июля";break;case"08":e="августа";break;case"09":e="сентября";break;case"10":e="октября";break;case"11":e="ноября";break;case"12":e="декабря";break;default:e=""}return t[2]+" "+e+" "+t[0]}},methods:{getUserInfo:function(){var t=JSON.parse(localStorage.getItem("user")),e=t.user,a=e.date,r=e.name,n=e.email;this.name=r,this.email=n,this.registered=a},logout:function(){localStorage.removeItem("user"),this.$router.push("/login")}},created:function(){this.getUserInfo()}}),lt=ct,ut=(a("7fd3"),Object(u["a"])(lt,it,ot,!1,null,"00b66222",null)),dt=ut.exports;v()(ut,{VBtn:p["a"],VCard:G["a"],VCardTitle:K["a"],VContainer:q["a"],VFlex:I["a"],VIcon:g["a"],VImg:W["a"],VLayout:$["a"]});var vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"event"},[a("v-toolbar",{staticStyle:{"background-size":"cover","background-color":"rgba(0,0,145,0.7)"},style:{backgroundImage:"url("+t.event.image+")"},attrs:{fixed:"","scroll-off-screen":"",dark:"",extended:""},scopedSlots:t._u([{key:"extension",fn:function(){return[a("router-link",{attrs:{to:"/events"}},[a("v-toolbar-side-icon",[a("v-icon",[t._v("arrow_back")])],1)],1),a("v-toolbar-title",{staticClass:"white--text",staticStyle:{"margin-left":"-8px"}},[t._v(t._s(t.event.title))]),a("v-spacer"),a("v-btn",{staticStyle:{"margin-top":"60px"},attrs:{fab:"",dark:"",color:"pink"},on:{click:t.getLink}},[a("v-icon",{attrs:{dark:""}},[t._v("gamepad")])],1)]},proxy:!0}])},[a("v-spacer")],1),t.event?a("v-flex",{staticClass:"content",attrs:{xs12:""}},[a("v-layout",[a("v-flex",{staticClass:"d-flex flex-column justify-center align-center align-content-center",attrs:{column:""}},[a("v-icon",{attrs:{large:"",dark:"",color:"green"}},[t._v("group")]),a("h5",[t._v(t._s(t.event.tags.typeTeam))])],1),a("v-flex",{staticClass:"d-flex flex-column justify-center align-center align-content-center"},[a("v-icon",{attrs:{large:"",dark:"",color:"red"}},[t._v("book")]),a("h5",[t._v(t._s(t.event.tags.typeGenre))])],1)],1),a("v-layout",[a("v-flex",{staticClass:"d-flex flex-column justify-center align-center align-content-center",attrs:{xs6:""}},[a("v-icon",{attrs:{large:"",dark:"",color:"blue"}},[t._v("access_time")]),a("h5",[t._v(t._s(t.event.tags.typeTime))])],1),a("v-flex",{staticClass:"d-flex flex-column justify-center align-center align-content-center",attrs:{xs6:""}},[a("v-icon",{attrs:{large:"",dark:"",color:"orange"}},[t._v("pin_drop")]),a("h5",[t._v(t._s(t.event.tags.location))])],1)],1),a("v-layout",{staticClass:"mt-3 mb-3"},[a("h2",{staticClass:"content__subheader ml-1"},[t._v("Описание")])]),a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticClass:"px-0 pl-2 pr-2"},[t._v(t._s(t.event.description))])],1),a("v-layout",{staticClass:"mt-3 mb-3"},[a("h2",{staticClass:"content__subheader ml-1"},[t._v("Правила")])]),a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticClass:"pl-2 pr-2"},[t._v(t._s(t.event.rules))])],1)],1):t._e(),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{staticClass:"d-flex fluid justify-content-center"},[t.loading?t._e():a("div",[a("v-card-title",{staticClass:"headline"},[t._v("Подтвердите участие")]),a("v-card-text",[t._v("Стоимость участия: "+t._s(t.event.price))]),a("v-card-text",[t._v("Для подтверждения регистрации в игре нажмите ОК")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"grey",flat:"",dark:"",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Отмена")]),a("v-btn",{attrs:{color:"green darken-2",dark:"",text:""},on:{click:t.gameRegister}},[t._v("ОК")])],1)],1)])],1)],1)},ft=[];function pt(t,e){var a=Object.keys(t);return Object.getOwnPropertySymbols&&a.push.apply(a,Object.getOwnPropertySymbols(t)),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a}function gt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?pt(a,!0).forEach(function(e){Object(S["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):pt(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var mt={name:"Event",components:{},data:function(){return{link:"",dialog:!1,loading:!1}},methods:{getLink:function(){var t=this;this.dialog=!0,this.loading=!0;var e=this.userQuests.filter(function(e){return e.id==t.$route.params.id});if(0!==e.length){var a=e[0].riddles[e[0].riddles.length-1].id;this.$router.push("/quest/"+this.$route.params.id+"/riddle/"+a)}else this.loading=!1},gameRegister:function(){this.$store.dispatch("users/gameRegister",this.$route.params.id),this.dialog=!1,this.$router.push("/quest/"+this.$route.params.id+"/riddle/1")}},computed:gt({},Object(C["b"])({event:"quest/event",userQuests:"users/quests"})),beforeCreate:function(){this.$store.dispatch("quest/getEventByID",this.$route.params.id),this.$store.dispatch("users/getUserQuestsByID")}},ht=mt,bt=(a("b6cc"),a("99d9")),yt=a("169a"),_t=a("9910"),xt=a("71d9"),wt=a("706c"),kt=a("2a7f"),Ot=Object(u["a"])(ht,vt,ft,!1,null,"0118ee52",null),jt=Ot.exports;v()(Ot,{VBtn:p["a"],VCard:G["a"],VCardActions:bt["a"],VCardText:bt["b"],VCardTitle:K["a"],VDialog:yt["a"],VFlex:I["a"],VIcon:g["a"],VLayout:$["a"],VSpacer:_t["a"],VToolbar:xt["a"],VToolbarSideIcon:wt["a"],VToolbarTitle:kt["a"]});var St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"quest"},[a("v-toolbar",{staticStyle:{"background-size":"cover","background-color":"rgba(0,0,145,0.7)"},style:{backgroundImage:"url("+t.event.image+")"},attrs:{fixed:"",dark:""}},[a("a",{on:{click:function(e){return t.$router.go(-1)}}},[a("v-toolbar-side-icon",[a("v-icon",[t._v("arrow_back")])],1)],1),a("v-toolbar-title",{staticClass:"white--text"},[t._v(t._s(t.event.title))]),a("v-spacer")],1),a("section",{staticClass:"content"},[a("v-list",t._l(t.items,function(e){return a("v-list-tile",{key:e.title,attrs:{avatar:""}},[a("v-list-tile-avatar",[a("img",{attrs:{src:e.avatar}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.title)}})],1),a("v-list-tile-action",[a("v-icon",{attrs:{color:e.active?"teal":"grey"}},[t._v("chat_bubble")])],1)],1)}),1)],1)],1)},Ct=[];function Vt(t,e){var a=Object.keys(t);return Object.getOwnPropertySymbols&&a.push.apply(a,Object.getOwnPropertySymbols(t)),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a}function Pt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Vt(a,!0).forEach(function(e){Object(S["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Vt(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var Et={name:"Quest",components:{},data:function(){return{}},computed:Pt({},Object(C["b"])({riddles:"quest/riddles"})),beforeCreate:function(){this.$store.dispatch("quest/getEventByIDAndRiddles",this.$route.params.id)}},Tt=Et,qt=(a("edb2"),a("8860")),It=a("ba95"),Dt=a("40fe"),$t=a("c954"),Rt=a("5d23"),Lt=Object(u["a"])(Tt,St,Ct,!1,null,"d20069a4",null),At=Lt.exports;v()(Lt,{VIcon:g["a"],VList:qt["a"],VListTile:It["a"],VListTileAction:Dt["a"],VListTileAvatar:$t["a"],VListTileContent:Rt["a"],VListTileTitle:Rt["b"],VSpacer:_t["a"],VToolbar:xt["a"],VToolbarSideIcon:wt["a"],VToolbarTitle:kt["a"]});var Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"riddle"},[a("v-toolbar",{staticStyle:{"background-size":"cover","background-color":"rgba(0,0,0,1)"},attrs:{fixed:"",dark:""}},[a("router-link",{attrs:{to:String(t.riddle.backToNum)}},[a("v-toolbar-side-icon",[a("v-icon",[t._v("arrow_back")])],1)],1),a("v-toolbar-title",{staticClass:"white--text"},[t._v(t._s(t.riddle.title))])],1),a("section",{staticClass:"content"},["ar"==t.riddle.type?a("div",[a("v-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("iframe",{staticStyle:{border:"0","border-radius":"10",width:"100%",height:"60vh"},attrs:{allow:"camera",src:t.riddle.location[0],name:t.name}})]),a("v-card",{staticClass:"mx-auto task-card grey darken-3",staticStyle:{"margin-bottom":"120px"},attrs:{dark:""}},[a("v-card-title",[a("v-icon",{attrs:{medium:"",left:""}},[t._v("mdi-cube-scan")]),a("span",{staticClass:"title font-weight-light"},[t._v("Дополненная реальность")])],1),a("v-card-text",[a("p",{staticClass:"regular"},[t._v("Не забудьте разрешить приложению доступ к камере")]),a("v-layout",{attrs:{"justify-center":""}},[a("v-btn",{attrs:{color:"primary",large:"",dark:""},on:{click:function(e){return e.stopPropagation(),t.startAR(e)}}},[t._v("\n              Открыть камеру\n              "),a("v-icon",{attrs:{right:""}},[t._v("mdi-augmented-reality")])],1)],1)],1),t.arHidden?a("v-card-text",[t._v(t._s(t.riddle.text))]):t._e()],1)],1):t._e(),"geo"==t.riddle.type?a("v-card",{staticClass:"mx-auto task-card grey darken-3",staticStyle:{"margin-bottom":"120px"},attrs:{dark:""}},[a("v-card-title",[a("v-icon",{attrs:{medium:"",left:""}},[t._v("extension")]),a("span",{staticClass:"title font-weight-light"},[t._v("Задание #"+t._s(t.riddle.num))])],1),t.dist<=20?a("v-card-text",{staticClass:"title text-xs-left task-text",staticStyle:{"line-height":"1.2em"},domProps:{innerHTML:t._s(t.riddle.text)}}):t._e(),t.dist>20?a("v-alert",{staticClass:"mx-2",attrs:{dense:"",border:"left",value:"dist > 20",type:"warning"}},[t._v("\n        Информация станет доступна, как только Ваше расстояние станет меньше 5 метров\n        "),999999==t.dist?a("p",[a("br"),t._v("Ой, кажется, вы забыли включить GPS, либо разрешить приложению доступ в настройках. Исправьте и возвращайтесь сюда!\n        ")]):t._e()]):t._e(),a("v-icon",{attrs:{text:"mdi-geolocation"}},[t._v("mdi-geolocation")]),t.dist>20?a("v-card-text",{staticClass:"title mb-2"},[t._v("До цели: "+t._s(t.dist)+"м.")]):t._e()],1):t._e(),"text"==t.riddle.type?a("v-card",{staticClass:"mx-auto task-card grey darken-3",staticStyle:{"margin-bottom":"120px"},attrs:{dark:""}},[a("v-card-title",[a("v-icon",{attrs:{medium:"",left:""}},[t._v("extension")]),a("span",{staticClass:"title font-weight-light"},[t._v("Задание #"+t._s(t.riddle.num))])],1),a("div",{staticClass:"card"},[t._v("\n        Текст\n      ")]),a("v-card-text",{staticClass:"regular text-xs-left task-text",staticStyle:{"line-height":"1.2em"},domProps:{innerHTML:t._s(t.riddle.text)}})],1):t._e()],1),t.riddle.last?t._e():a("v-form",{staticClass:"px-3 pt-1",staticStyle:{bottom:"40px",position:"fixed",width:"100%","background-color":"black","border-radius":"30px 30px 0px 0px"},on:{submit:function(e){return e.preventDefault(),t.postAnswer(e)}}},[a("v-layout",{attrs:{"align-center":"","justify-space-between":""}},[t.riddle.required?a("v-text-field",{staticClass:"ml-2 mt-2",attrs:{light:"",solo:"",placeholder:"Ответ"},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}}):t._e(),t.riddle.required?t._e():a("p",{staticClass:"headline mb-3 text-xs-right font-weight-bold",staticStyle:{color:"white","text-align":""}},[t._v("Далее")]),a("v-btn",{staticClass:"ml-2 mb-3",attrs:{loading:t.loading,disabled:"geo"==t.riddle.type&&t.dist>20,fab:"",dark:"",color:"green darken-1"},on:{click:function(e){return t.postAnswer(t.riddle.nextNum)}}},[a("v-icon",{attrs:{dark:""}},[t._v("arrow_right")])],1)],1)],1)],1)},Bt=[],Ft=a("8c84");function Jt(t,e){var a=Object.keys(t);return Object.getOwnPropertySymbols&&a.push.apply(a,Object.getOwnPropertySymbols(t)),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a}function Qt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Jt(a,!0).forEach(function(e){Object(S["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Jt(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var Mt={name:"Riddle",components:{},data:function(){return{answer:"",isLoading:!1,dist:999999,loaded:!1,dialog:!1,arHidden:!1,name:Date.now()}},beforeCreate:function(){this.$store.dispatch("quest/getRiddle",this.$route.params)},methods:{startAR:function(){this.dialog=!0,this.arHidden=!0;var t={audio:!1,video:{facingMode:{exact:"environment"}}};navigator.mediaDevices.getUserMedia(t).then(function(t){}).catch(function(t){})},postAnswer:function(t){this.isLoading=!0,this.$store.dispatch("quest/postAnswer",{answer:this.answer,questID:this.$route.params.id,riddleID:this.$route.params.riddle_id,nextNum:t}),this.isLoading=!1},getDistance:function(){}},computed:Qt({},Object(C["c"])("quest",{riddle:function(t){return t.riddle}}),{},Object(C["c"])("quest",{loading:function(t){return t.loading}}),{success:function(){return this.$store.state.quest.success}}),beforeUpdate:function(){var t=this;if("ar"==this.riddle.type&&(this.$loadScript("https://aframe.io/releases/0.9.2/aframe.min.js").then(function(){t.loaded=!0}).catch(function(){t.loaded=!1}),this.$loadScript("https://cdn.rawgit.com/jeromeetienne/AR.js/1.7.7/aframe/build/aframe-ar.js").then(function(){t.loaded=!0}).catch(function(e){t.loaded=!1})),"geo"==this.riddle.type){var e={enableHighAccuracy:!0,timeout:2e3,maximumAge:0};navigator.geolocation.watchPosition(function(e){t.dist=Object(Ft["getDistance"])({latitude:e.coords.latitude,longitude:e.coords.longitude},{latitude:t.riddle.location[0],longitude:t.riddle.location[1]})},function(t){alert("Please enable your GPS position feature.")},e)}},beforeDestroy:function(){this.riddle.text="Загрузка"},mounted:function(){},watch:{$route:function(){this.$store.dispatch("quest/getRiddle",this.$route.params),this.answer=""}}},zt=Mt,Ut=(a("7f26"),a("0798")),Ht=Object(u["a"])(zt,Nt,Bt,!1,null,"eaf6c706",null),Gt=Ht.exports;v()(Ht,{VAlert:Ut["a"],VBtn:p["a"],VCard:G["a"],VCardText:bt["b"],VCardTitle:K["a"],VDialog:yt["a"],VForm:D["a"],VIcon:g["a"],VLayout:$["a"],VTextField:N["a"],VToolbar:xt["a"],VToolbarSideIcon:wt["a"],VToolbarTitle:kt["a"]}),r["a"].use(k["a"]);var Kt=new k["a"]({mode:"history",routes:[{path:"/profile",name:"profile",component:dt},{path:"/teams",name:"teams",component:st},{path:"/login",name:"login",component:F},{path:"/",name:"events",component:Z},{path:"/event/:id",name:"event",component:jt},{path:"/quest/:id",name:"quest",component:At},{path:"/quest/:id/riddle/:riddle_id",name:"Riddle",component:Gt},{path:"*",redirect:"/"}],scrollBehavior:function(t,e,a){return{x:0,y:0}}});Kt.beforeEach(function(t,e,a){var r=["/login"],n=!r.includes(t.path),s=localStorage.getItem("user");if(n&&!s)return a("/login");a()});var Wt=Kt,Xt={namespaced:!0,state:{type:null,message:null},actions:{success:function(t,e){var a=t.commit;a("success",e)},error:function(t,e){var a=t.commit;a("error",e)},clear:function(t,e){var a=t.commit;a("success",e)}},mutations:{success:function(t,e){t.type="alert-success",t.message=e},error:function(t,e){t.type="alert-danger",t.message=e},clear:function(t){t.type=null,t.message=null}}},Yt=(a("96cf"),a("3b8d"));function Zt(){var t=JSON.parse(localStorage.getItem("user"));return t&&t.token?{"x-auth-token":t.token,"Content-Type":"application/json"}:{}}var te=a("bc3a"),ee=a.n(te),ae="https://net-quest.herokuapp.com";function re(t,e){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})};return fetch("".concat(ae,"/api/auth"),a).then(le).then(function(t){return localStorage.setItem("user",JSON.stringify(t)),t})}function ne(){localStorage.removeItem("user")}function se(){return ie.apply(this,arguments)}function ie(){return ie=Object(Yt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ee.a.get("".concat(ae,"/api/users/quests"),{headers:Zt()});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),ie.apply(this,arguments)}function oe(t){var e={method:"POST",headers:Zt()};return fetch("".concat(ae,"/api/quest/")+t,e)}function ce(t,e,a){var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:e,password:a})};return fetch("".concat(ae,"/api/users"),r).then(le).then(function(t){return t&&localStorage.setItem("user",JSON.stringify(t)),t})}function le(t){return t.json().then(function(e){if(!t.ok){401===t.status&&(ne(),location.reload(!0));var a=e&&e.message||t.statusText;return Promise.reject(a)}return e})}var ue={login:re,logout:ne,register:ce,getUserQuestsByID:se,gameRegister:oe},de=JSON.parse(localStorage.getItem("user")),ve=de?{status:{loggedIn:!0},user:de,loading:!1}:{status:{loggedIn:!1},user:null,loading:!1},fe={namespaced:!0,state:ve,actions:{login:function(t,e){var a=t.dispatch,r=t.commit,n=e.email,s=e.password;r("loginRequest",{email:n}),ue.login(n,s).then(function(t){r("loginSuccess",t),Wt.push("/")},function(t){r("loginFailure",t),a("alert/error",t,{root:!0})})},register:function(t,e){var a=t.dispatch,r=t.commit,n=e.name,s=e.email,i=e.password;r("loginRequest",{email:s}),ue.register(n,s,i).then(function(t){r("loginSuccess",t),Wt.push("/")},function(t){r("loginFailure",t),a("alert/error",t,{root:!0})})},logout:function(t){var e=t.commit;ue.logout(),e("logout")}},mutations:{loginRequest:function(t,e){t.status={loggingIn:!0},t.user=e,t.loading=!0},loginSuccess:function(t,e){t.status={loggedIn:!0},t.user=e,t.loading=!1},loginFailure:function(t){t.status={},t.user=null,t.loading=!1},logout:function(t){t.status={},t.user=null}}},pe={namespaced:!0,state:{all:{},quests:{}},actions:{getUserQuestsByID:function(t){var e=t.commit;ue.getUserQuestsByID().then(function(t){return e("getQuests",t.data)},function(t){return""})},gameRegister:function(t,e){var a=t.commit;ue.gameRegister(e).then(function(t){return a("getQuests",t.data)},function(t){return""})}},getters:{quests:function(t){return t.quests}},mutations:{getQuests:function(t,e){t.quests=e}}},ge="https://net-quest.herokuapp.com";function me(){return he.apply(this,arguments)}function he(){return he=Object(Yt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ee.a.get("".concat(ge,"/api/quest"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),he.apply(this,arguments)}function be(t){return ye.apply(this,arguments)}function ye(){return ye=Object(Yt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ee.a.get("".concat(ge,"/api/quest/")+e,{headers:Zt()});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),ye.apply(this,arguments)}function _e(t){return xe.apply(this,arguments)}function xe(){return xe=Object(Yt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ee.a.get("".concat(ge,"/api/quest/")+e+"?riddles");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),xe.apply(this,arguments)}function we(t,e){return ke.apply(this,arguments)}function ke(){return ke=Object(Yt["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ee.a.get("".concat(ge,"/api/quest/")+e+"/"+a,{headers:Zt()});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),ke.apply(this,arguments)}function Oe(t,e,a){var r={method:"POST",headers:Zt(),body:JSON.stringify({answer:a})};return fetch("".concat(ge,"/api/quest/")+t+"/"+e,r)}var je={getEvents:me,getEventByID:be,getEventByIDAndRiddles:_e,getRiddle:we,postAnswer:Oe},Se={namespaced:!0,state:{events:[{image:"",_id:"",isActual:!0}],event:[{image:"",_id:"",title:"Загрузка",tags:{typeTeam:"",location:"",typeGenre:"",typeTime:""}}],riddle:[{title:"Загрузка..."}],loading:!1,success:!0},actions:{getEvents:function(t){t.commit("setLoading");try{je.getEvents().then(function(e){t.commit("setEvents",e.data)})}catch(e){this.state.isLoading=!1}},getEventByID:function(t,e){t.commit("setLoading");try{je.getEventByID(e).then(function(e){t.commit("setEvent",e.data)})}catch(a){this.state.isLoading=!1}},getEventByIDAndRiddles:function(t,e){t.commit("setLoading");try{je.getEventByIDAndRiddles(e).then(function(e){t.commit("setEvent",e.data)})}catch(a){this.state.isLoading=!1}},getRiddle:function(t,e){t.commit("setLoading"),console.log(e);var a=e.id,r=e.riddle_id;try{je.getRiddle(a,r).then(function(e){t.commit("setRiddle",e.data)})}catch(n){this.state.isLoading=!1}},postAnswer:function(t,e){t.commit("setLoading");var a=e.questID,r=e.riddleID,n=e.answer,s=e.nextNum;console.log(s);try{je.postAnswer(a,r,n).then(function(e){e.json().then(function(e){t.commit("setIsSucceed",{res:e,nextNum:s})})})}catch(i){this.state.isLoading=!1}}},mutations:{setLoading:function(t){t.loading=!0},setEvents:function(t,e){t.loading=!1,t.events=e},setEvent:function(t,e){t.event=e,t.loading=!1},setRiddle:function(t,e){t.riddle=e,t.loading=!1},setIsSucceed:function(t,e){e.res.success?(this.state.success=!0,Wt.push("/quest/"+Wt.currentRoute.params.id+"/riddle/"+e.nextNum)):this.state.success=!1,t.loading=!1}},getters:{event:function(t){return t.event},events:function(t){return t.events.filter(function(t){return!t.isActual})},actualEvent:function(t){return t.events.filter(function(t){return t.isActual})},riddle:function(t){return t.riddle[0]}}};r["a"].use(C["a"]);var Ce=new C["a"].Store({state:{},mutations:{},actions:{},modules:{alert:Xt,authentication:fe,users:pe,quest:Se}}),Ve=a("bb71"),Pe=(a("bf40"),a("ebfd")),Ee=a.n(Pe),Te=a("67b0");a("da64"),a("5363");r["a"].use(Ve["a"],{icons:{iconfont:"mdi"}}),r["a"].use(Te["a"]),r["a"].use(Ee.a),ee.a.defaults.headers.common["Content-Type"]="application/json",r["a"].use(Ve["a"]),r["a"].config.productionTip=!1,new r["a"]({router:Wt,store:Ce,Vuetify:Ve["a"],render:function(t){return t(w)}}).$mount("#app")},"6f07":function(t,e,a){"use strict";var r=a("4342"),n=a.n(r);n.a},"7e8b":function(t,e,a){},"7f26":function(t,e,a){"use strict";var r=a("1489"),n=a.n(r);n.a},"7fd3":function(t,e,a){"use strict";var r=a("ba91"),n=a.n(r);n.a},"8ebf":function(t,e,a){},b205:function(t,e,a){},b6cc:function(t,e,a){"use strict";var r=a("7e8b"),n=a.n(r);n.a},ba91:function(t,e,a){},edb2:function(t,e,a){"use strict";var r=a("8ebf"),n=a.n(r);n.a}});
//# sourceMappingURL=app.9c4df04e.js.map